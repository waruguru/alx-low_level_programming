#!/bin/bash

# Get the C file name from the environment variable
CFILE=$CFILE

# Specify the output file name
OUTPUT_FILE="c"

# Run the C file through the preprocessor, remove comments, and save the result
cpp -P $CFILE | sed '/^$/d; /^#/d; s/\/\*.*\*\///g; s/\/\/.*//g' > $OUTPUT_FILE

# Display the last few lines of the output file for verification
tail $OUTPUT_FILE

